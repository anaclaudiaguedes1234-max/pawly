{% extends "layout.html" %}
{% block title %}Cuidados de {{ pet.nome }}{% endblock %}

{% block content %}
<div class="pawly-section">
    <div class="pawly-card">

        <div class="text-center mb-4">
            <div class="pawly-header-emoji">üíäüê∂</div>
            <div class="pawly-badge">Cuidados</div>
            <h2 class="pawly-page-title">Cuidados de {{ pet.nome }}</h2>
            <p class="pawly-subtitle">
                Registre vacinas, banhos, rem√©dios e outros cuidados importantes.
            </p>

            {% if pet.foto %}
                {% if pet.foto[:4] == 'http' %}
                    <img src="{{ pet.foto }}" width="160" class="rounded shadow mt-2">
                {% else %}
                    <img src="{{ url_for('static', filename=pet.foto) }}" width="160" class="rounded shadow mt-2">
                {% endif %}
            {% endif %}
        </div>

        <h4 class="mb-3">Hist√≥rico</h4>

        {% if cuidados %}
            <ul class="list-group mb-4">
                {% for c in cuidados %}
                <li class="list-group-item d-flex justify-content-between align-items-start">

                    <div>
                        <strong>{{ c.tipo }}</strong> ‚Äî {{ c.data.strftime("%d/%m/%Y") }}
                        <br>{{ c.descricao or "Sem descri√ß√£o" }}

                        {% if c.custo %}
                            <br>
                            <span class="text-success">
                                R$ {{ "%.2f"|format(c.custo) }}
                            </span>
                        {% endif %}

                        {% if c.observacoes %}
                            <br>
                            <small class="text-muted">{{ c.observacoes }}</small>
                        {% endif %}
                    </div>

                    <form method="POST"
                          action="{{ url_for('delete_care', care_id=c.id) }}"
                          onsubmit="return confirm('Tem certeza que deseja excluir este cuidado?');">

                        <button class="btn btn-sm btn-danger ms-3">
                            Excluir
                        </button>
                    </form>

                </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-muted">Nenhum cuidado registrado ainda.</p>
        {% endif %}

        <h4 class="mb-3">Novo cuidado</h4>

        <div class="card p-4 shadow-sm mt-2">
            <form method="POST">

                <label class="form-label">Tipo</label>
                <select class="form-control" name="tipo" required>
                    <option value="">Selecione...</option>
                    <option>Vacina</option>
                    <option>Banho</option>
                    <option>Rem√©dio</option>
                    <option>Consulta</option>
                    <option>Verm√≠fugo</option>
                    <option>Tosa</option>
                    <option>Outro</option>
                </select>

                <label class="form-label mt-3">Descri√ß√£o</label>
                <input type="text" class="form-control" name="descricao">

                <label class="form-label mt-3">Data</label>
                <input type="date" class="form-control" name="data" required>

                <label class="form-label mt-3">Observa√ß√µes</label>
                <textarea class="form-control" name="observacoes"></textarea>

                <label class="form-label mt-3">Custo (R$)</label>
                <input type="number" step="0.01" class="form-control" name="custo">

                <button class="btn btn-info w-100 text-white mt-4">
                    Registrar
                </button>

            </form>
        </div>

    </div>
</div>
{% endblock %}
